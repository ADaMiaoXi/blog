<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.71" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://mister-hope.github.io/blog/posts/brain-boom/design-patterns/structural/decorator.html"><meta property="og:site_name" content="大喵喜的技术杂货铺"><meta property="og:title" content="装饰器模式"><meta property="og:description" content="意图 装饰模式是一种结构型设计模式， 允许你通过将对象放入包含行为的特殊封装对象中来为原对象绑定新的行为。 问题 假设你正在开发一个提供通知功能的库， 其他程序可使用它向用户发送关于重要事件的通知。 库的最初版本基于通知器Notifier类， 其中只有很少的几个成员变量， 一个构造函数和一个send发送方法。 该方法可以接收来自客户端的消息参数， 并将..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-04-10T08:16:01.000Z"><meta property="article:modified_time" content="2025-04-10T08:16:01.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"装饰器模式","image":[""],"dateModified":"2025-04-10T08:16:01.000Z","author":[{"@type":"Person","name":"Jianshu.Shi","url":"https://mister-hope.com"}]}</script><link rel="icon" href="/blog/favicon.ico"><title>装饰器模式 | 大喵喜的技术杂货铺</title><meta name="description" content="意图 装饰模式是一种结构型设计模式， 允许你通过将对象放入包含行为的特殊封装对象中来为原对象绑定新的行为。 问题 假设你正在开发一个提供通知功能的库， 其他程序可使用它向用户发送关于重要事件的通知。 库的最初版本基于通知器Notifier类， 其中只有很少的几个成员变量， 一个构造函数和一个send发送方法。 该方法可以接收来自客户端的消息参数， 并将...">
    <link rel="stylesheet" href="/blog/assets/css/styles.bac1a030.css">
    <link rel="preload" href="/blog/assets/js/runtime~app.bbf52072.js" as="script"><link rel="preload" href="/blog/assets/css/styles.bac1a030.css" as="style"><link rel="preload" href="/blog/assets/js/1386.bd671d60.js" as="script"><link rel="preload" href="/blog/assets/js/app.002a75ee.js" as="script">
    <link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_dataStorage.html.f057a273.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_operator.html.80692aec.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_advance_render-performance-optimization.html.7aee31e4.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_advance_scheduler.html.25f68796.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_communicationBetweenTabs.html.feef17bd.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_link.html.440bc055.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_class_structure.html.019dfb59.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_this.html.1b8da415.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_tree.html.90fae623.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_heap.html.3a1ebdf0.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_sort.html.abb2f4e8.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_promise.html.6699889d.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_dictionary.html.8892c2e2.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_command.html.56bcf264.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_typeConversion.html.6fe58a44.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_prototype.html.3404c526.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_eventLoop.html.6cf78d04.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_dynamicProgramming.html.268d3982.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_decorator.html.22c448f0.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_scopeAndScopeChain.html.0d1f9510.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_debounceAndThrottle.html.31bc1e96.js" as="script"><link rel="prefetch" href="/blog/assets/js/8300.fd2e2f82.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_chain-of-responsibility.html.ac4c1140.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_queue.html.e22ee80d.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_state.html.bb2fdc7e.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_valueAndReference.html.cee2140b.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_webWorker.html.15e55e7f.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_proxy.html.8c97d5de.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_search.html.a13c259f.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_browserCache.html.f7f2ee2f.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_adapter.html.9976a15d.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_iterator.html.ffb56da7.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_set.html.56746320.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_let_var_const.html.0b5f7880.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_memento.html.48424784.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_advance_react-structure.html.f4d2424e.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_advance_virtual-DOM.html.7882fe97.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_mediator.html.aeea43f3.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_template-method.html.37f1b713.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_observer.html.51b27082.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_ExecutionStackAndContext.html.d4705ae3.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_builder.html.b774e070.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_DOMEventPropagationMechanism.html.4f131162.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_prototype.html.2bb1736f.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_crossDomain-CORS.html.7e5f4642.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_JWT.html.e54b9f4b.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_strictMode.html.cce375d4.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_backtracking.html.380b12f5.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_strategy.html.4439c780.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_visitor.html.cadaadb3.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_closure.html.430e5870.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_advance_react-render-flow.html.77586b4d.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_advance_fiber-double-buffering.html.29a920e9.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_composite.html.5974e7c6.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_abstract.html.a2b7cf79.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_advance_difference-between-react-and-vue.html.1eee5086.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_browserRenderFlow.html.554b5580.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_fileUpload.html.3af34ecd.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_stack.html.01b933b1.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_greedy.html.0dbfe60e.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_packagesType.html.9c1dae24.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_factory.html.80179dc2.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_singleton.html.d62f5501.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_floatingPrecisionProblem.html.026ab721.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_flyweight.html.d0621147.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_resourceKeywords.html.7f5d0421.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_advance_message-channel.html.b8a1bf9c.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_preventDefaultBehaviors.html.d90cd700.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_bridge.html.ade2be27.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_cookieAndStorage.html.916bf3e1.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_GC_MemoryLeak.html.d6bf91da.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_negotiatedCache.html.851a7e8a.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_facade.html.a82e4249.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_HTTPVersionsDiffer.html.ab72ec4a.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_componentsOfBrowser.html.2b1bfea6.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_webSocket.html.d577c368.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_SSL_TLS_HTTPS.html.5963c02e.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_tcp.html.7ca63723.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_requestMethods.html.f7aff98e.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_crossDomain-proxy.html.5c0f9c5a.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_FiveLayerNetworkModel.html.984db039.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_breakpointResume.html.bef1e74a.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_networkPerformanceOptimization.html.c4844516.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_sameOriginPolicy.html.5fc42416.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_CSRFAttack.html.8dbe697f.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_encrypt.html.0d4e58bb.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_DNS.html.b7b3afe8.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_session.html.c60cb999.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_XSSAttack.html.d661ab25.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_crossDomain-JSONP.html.564ac629.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_fileDownload.html.5ac327d4.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_index.html.5932a28f.js" as="script"><link rel="prefetch" href="/blog/assets/js/index.html.3d4a7c6a.js" as="script"><link rel="prefetch" href="/blog/assets/js/intro.html.2a321f1c.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_index.html.6499b16c.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_index.html.088353bb.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_index.html.45139b31.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_frontend-engineering_webpack.html.513f5ec5.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_index.html.7a7d6a06.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_frontend-engineering_index.html.71d6e4e2.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_index.html.c03d801c.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_index.html.af3e5d16.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_index.html.f8e6491c.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_index.html.cfb6b50c.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_index.html.2be4a80b.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_index.html.b9697908.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_index.html.98a50208.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_base_index.html.fff76d47.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_react_advance_index.html.f7a34a48.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_index.html.be4a3dab.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_数据结构与算法_index.html.8ffe3c4f.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_前端工程化_index.html.c3971deb.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_设计模式_index.html.89c54783.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_浏览器_index.html.93ac0abe.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_javascript_index.html.c8d93b33.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_网络_index.html.b8f96991.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_react_index.html.1081b9d6.js" as="script"><link rel="prefetch" href="/blog/assets/js/404.html.1ee3259a.js" as="script"><link rel="prefetch" href="/blog/assets/js/timeline_index.html.c94a1e03.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_index.html.a6faf54c.js" as="script"><link rel="prefetch" href="/blog/assets/js/article_index.html.6593660e.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_index.html.90ad7b55.js" as="script"><link rel="prefetch" href="/blog/assets/js/star_index.html.4b45c567.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/blog/" aria-label="带我回家"><img class="vp-nav-logo" src="/blog/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">大喵喜的技术杂货铺</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/" aria-label="主页" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" height="1em" sizing="height"></iconify-icon><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="代码不止"><!--[--><iconify-icon class="vp-icon" icon="proicons:code" height="1em" sizing="height"></iconify-icon>代码不止<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/coding-more/JavaScript/" aria-label="JavaScript" iconsizing="both"><!--[--><img class="vp-icon" src="https://www.runoob.com/wp-content/uploads/2013/07/js-logo.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->JavaScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/coding-more/react/" aria-label="React" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:react-dark" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->React<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/coding-more/frontend-engineering/" aria-label="前端工程化" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="eos-icons:organisms" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->前端工程化<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="不止代码"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:code-off-rounded" height="1em" sizing="height"></iconify-icon>不止代码<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/more-than-code/browser/" aria-label="浏览器" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="eos-icons:application-window-outlined" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->浏览器<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/more-than-code/network/" aria-label="网络" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="line-md:spotify" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->网络<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="脑力涌现"><!--[--><iconify-icon class="vp-icon" icon="eos-icons:neural-network" height="1em" sizing="height"></iconify-icon>脑力涌现<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/brain-boom/data-structure/" aria-label="数据结构与算法" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/icon/data-structure.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->数据结构与算法<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/blog/posts/brain-boom/design-patterns/" aria-label="设计模式" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="mdi:lightbulb-on-10" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->设计模式<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/blog/" aria-label="主页" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->主页<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="proicons:code" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">代码不止</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="material-symbols:code-off-rounded" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">不止代码</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="eos-icons:neural-network" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">脑力涌现</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="vp-icon" src="/blog/assets/icon/data-structure.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><span class="vp-sidebar-title">数据结构与算法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="mdi:lightbulb-on-10" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">设计模式</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="material-symbols:new-window-rounded" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">创建型模式</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="material-symbols:view-in-ar-outline-rounded" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">结构型模式</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/structural/facade.html" aria-label="外观模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/structural/facade/facade-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->外观模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/structural/adapter.html" aria-label="适配器模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/structural/adapter/adapter-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->适配器模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/structural/bridge.html" aria-label="桥接模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/structural/bridge/bridge-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->桥接模式<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/blog/posts/brain-boom/design-patterns/structural/decorator.html" aria-label="装饰器模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/structural/decorator/decorator-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->装饰器模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/structural/composite.html" aria-label="组合模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/structural/composite/composite-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->组合模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/structural/flyweight.html" aria-label="享元模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/structural/flyweight/flyweight-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->享元模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/structural/proxy.html" aria-label="代理模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/structural/proxy/proxy-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->代理模式<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="material-symbols:partner-exchange-rounded" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">行为型模式</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/structural/decorator/decorator-mini.png" alt aria-hidden no-view height="1em" sizing="height">装饰器模式</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://mister-hope.com" target="_blank" rel="noopener noreferrer">Jianshu.Shi</a></span><span property="author" content="Jianshu.Shi"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025年3月5日</span><meta property="datePublished" content="2025-03-05T13:12:38.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 12 分钟</span><meta property="timeRequired" content="PT12M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8 clickable" role="navigation">设计模式</span><!--]--><meta property="articleSection" content="设计模式"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><!--[--><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#意图">意图</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#问题">问题</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#解决方案">解决方案</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#真实世界类比">真实世界类比</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#装饰模式结构">装饰模式结构</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#伪代码">伪代码</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#装饰模式优缺点">装饰模式优缺点</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#与其他模式的关系">与其他模式的关系</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--]--><!----></aside></div><!----><div class="theme-hope-content" vp-content><h2 id="意图" tabindex="-1"><a class="header-anchor" href="#意图"><span>意图</span></a></h2><p><strong>装饰模式</strong>是一种结构型设计模式， 允许你通过将对象放入包含行为的特殊封装对象中来为原对象绑定新的行为。</p><figure><img src="/blog/assets/img/decorator.1af80e1a.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h2><p>假设你正在开发一个提供通知功能的库， 其他程序可使用它向用户发送关于重要事件的通知。</p><p>库的最初版本基于<code>通知器Notifier</code>类， 其中只有很少的几个成员变量， 一个构造函数和一个<code>send发送</code>方法。 该方法可以接收来自客户端的消息参数， 并将该消息发送给一系列的邮箱， 邮箱列表则是通过构造函数传递给通知器的。 作为客户端的第三方程序仅会创建和配置通知器对象一次， 然后在有重要事件发生时对其进行调用。</p><figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAhwAAADcCAMAAAAMV4jTAAABblBMVEVHcExDREU4OT02NjdBQ0NGR0hISEhHR0dDREVJSUlHR0dFRkZISEhISEhISEhISEg4Ozw/QkJJSUlISEjCwsLDw8PCwsK/v7/BwcHDw8PCwsK3t7fBwcHDw8PCwsLDw8PCwsLDw8N4e3rk5OT39/fq6ur09PT29vbr6+vh4eDx8fFTVFRucnChoqHe395NTU2trq1YWFju7u69vryBgoFtbm5LS0u1trbQ0dCMjoyTlJOoqagrMjR9fn0tNDUyODo/RUYrMTNcXV2xsrGdnp1PUlK6urp2d3abm5rV1tRfYGCQko5iZGSkpqLIycjo6OeJi4hpamqEhoIrMTQsMjRmZmbY2diGh4crMTIoLjBUWVmWl5ZnZ2ePkZK0uLLCxr/b29tydXRBR0jQ1Mzb3tZJT09WXFx6fX/Ly8r///9GS0zGx8X+/v77+/uGiYWYnJi5vLUnLTDT189lZWVkZGRmZmZlZWU4Pj8lKy7Dw8M27SqWAAAAenRSTlMADyUGM1man2//i0Oq6rzdehv2zrX/tC8a7aAL/Yjc/n5V//////////////////////////////////+T/7f//+3//////////////////////87/////ov////7///////////////////////////n/pILhv///1P4eCBoAABwOSURBVHgB7NZHougoDETRAoytEhn2v9e2/dNL0x6hs4arAGOMMcYYY4wxxhhjjDH/C+cDfhIObMX4CCCev10egPDAT5QJZieZAsT8KiwHgFrw8PWVAMhL2eTlYLYQKjuA3PpxsQ4AYbLdauKqdTECaPzEw+whZB7A6IVUPIR58Tx7YgL8rzhyuPXThRfMLlyCrBvJtQSuLCgBfI7DOVeaewWYjegUuagiUxEZf4gj8h+B2YJXVYFO7yOT91OB5ILShfApDh/jbPEXD7OFVAorlH8oEn+7/sVRLkCYIHQwO6kVWkJI9CEUxRCRVuT2L455wpc1RqcfY2ArFgdVMy9VKh6thY8/R6Di5F8BW7E4cl6sOVNxG2QNH+JwFBwSY7wYbzB7nRUg0QNFcRMqrw9xHIx42M+xnbX+xKEnFcAoFUpNTCG8XQh9XY/C9fDYghmVzHoB/hpnPQcQMhOQKXxF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" alt="程序可以使用通知器类向预定义的邮箱发送重要事件通知。" tabindex="0" loading="lazy"><figcaption>程序可以使用通知器类向预定义的邮箱发送重要事件通知。</figcaption></figure><p>此后某个时刻， 你会发现库的用户希望使用除邮件通知之外的功能。 许多用户会希望接收关于紧急事件的手机短信， 还有些用户希望在微信上接收消息， 而公司用户则希望在 QQ 上接收消息。</p><figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbgAAACqCAMAAADofaqlAAACf1BMVEVHcExFRUVISEhISEhJSUlJSUl6e3rk5OT39/fr6+r19fXz8/Ph4eLx8fHX19dPUVHf39+MjIuHh4asra1XWFju7u6JiohUVVVSU1Oen55ra2uxsbF9fn3DxMKoqqhgY2JeYF9LS0uYmZi5ublzdHTo6OfHx8bNzc12d3fU1dRvb3Btbm7JyclZWVpbXFxOTk5lZWW0tLSVlpXc3NzCwsK8vLyam5uBg4KOj49maWiho6D29vZmZmaDhoSlpaW2t7e+v7+Rk5JkZGRlZWVkZGRmZmZlZWV0jjNlZWVmZmYwIhljY2NkZGRnZ2dFJhz////a2tnQ0dH7/Ptwc3M8QEN2enlHTE3+/v5KT1BESUpBRUdjZmVpbWw8YAYYGRwuNDYtMjQrMjQsMjQtNDYuNDYsMjQ5PkANDg4twwAvxAAuwQAdHiEtwQAuxQEvyQArMjQzNzkqMDIuNDYtwQADAQAAAAAAAAA2Ozy/wrq1ubIuwgAqwAEmvwAkvwAAAAAAAAAEBAIHAAErMDO6vbYuwQBCxxt01lec4oes55qU4H5p00k2xA4AAAAjJygsMjVOyynv+uvm+OEtMzWK3XH0/PIoLS8bGxkPDxC5vLVczznJ776k5JEnxwDN8cJ+2WMAAAAbBwMuIAJUOgFvSgGOYQN9VQLb9dSsdgX4qwf/tQf/sgcAAADfmQbFhwU9CAhFHwTvGCTjGCG7GSCWEBZpCw9OCAs8BQh2DRGaEBfsGSP1RB/0GSPeGCGDDxXuMTrrERy97K76w8b1iY73mJ34rrL93+D+8fIAAAD7z9HzbHPF7rr8rAX5qweYaAT8rAb/rgX/uQf/ugj8rwX1qAajbwHLgTcOAAAA1XRSTlMAG6bm/+3///////////////////////////////////////////////////////////////////////////////8u6273sRXJ3AVKj0MK//////////////////8CEWGw1sSdRP//NkR+jCCy//+2//F6/0uXe////0P////x//7b5f+A/////////8Esp////4z///////////////9t//////////j+//9d//+CXrL///////////8u/4b/////////////rf///0K485po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" alt="每种通知类型都将作为通知器的一个子类得以实现。" tabindex="0" loading="lazy"><figcaption>每种通知类型都将作为通知器的一个子类得以实现。</figcaption></figure><p>这有什么难的呢？ 首先扩展<code>通知器</code>类， 然后在新的子类中加入额外的通知方法。 现在客户端要对所需通知形式的对应类进行初始化， 然后使用该类发送后续所有的通知消息。</p><p>但是很快有人会问： ​ “为什么不同时使用多种通知形式呢？ 如果房子着火了， 你大概会想在所有渠道中都收到相同的消息吧。”</p><p>你可以尝试创建一个特殊子类来将多种通知方法组合在一起以解决该问题。 但这种方式会使得代码量迅速膨胀， 不仅仅是程序库代码， 客户端代码也会如此。</p><figure><img src="/blog/assets/img/problem3-zh.8df1d224.png" alt="子类组合数量爆炸。" tabindex="0" loading="lazy"><figcaption>子类组合数量爆炸。</figcaption></figure><p>你必须找到其他方法来规划通知类的结构， 否则它们的数量会在不经意之间打破吉尼斯纪录。</p><h2 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h2><p>当你需要更改一个对象的行为时， 第一个跳入脑海的想法就是扩展它所属的类。 但是， 你不能忽视继承可能引发的几个严重问题。</p><ul><li>继承是静态的。 你无法在运行时更改已有对象的行为， 只能使用由不同子类创建的对象来替代当前的整个对象。</li><li>子类只能有一个父类。 大部分编程语言不允许一个类同时继承多个类的行为。</li></ul><p>其中一种方法是用 <em>聚合</em> 或 <em>组合</em> ， 而不是 <em>继承</em>。 两者的工作方式几乎一模一样： 一个对象包含指向另一个对象的引用， 并将部分工作委派给引用对象； 继承中的对象则继承了父类的行为， 它们自己 <em>能够</em> 完成这些工作。</p><p>你可以使用这个新方法来轻松替换各种连接的 “小帮手” 对象， 从而能在运行时改变容器的行为。 一个对象可以使用多个类的行为， 包含多个指向其他对象的引用， 并将各种工作委派给引用对象。 聚合 （或组合） 组合是许多设计模式背后的关键原则 （包括装饰在内）。 记住这一点后， 让我们继续关于模式的讨论。</p><figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAiYAAACgCAMAAAAPZleYAAAAxlBMVEVHcExMTExMTExISEhISEhSUlJHR0dISEhISEhWVlZISEhISEhVVVVISEhISEgkJCRHR0dJSUlKSkpJSUlQUFBISEhISEhISEhFRUVISEhVVVV7e3vk5OT39/ft7e309PTp6eny8vLJyclpaWlYWFi/v79TU1Nzc3Onp6diYmLV1dVOTk7Q0NCJiYmSkpLf399dXV2tra1mZmahoaG4uLiCgoKysrKbm5va2tplZWVubm5mZmZmZmZlZWVmZmZlZWVlZWVlZWUD/Mn+AAAAQnRSTlMAEBts9y9UprI8fYol0t0CnO7//1/kuscH50j//////////////////////////////////////////9vyhfyivW0qZh7aAAAK8ElEQVR4AezBAQEAAAQAIP6fNgNUAQAAAADMl8VefRhoiAJRAH5IlJHkIKL9F3q6f7jcwOLXwcQ34UUI/I/HQyoNIwFYh5fZf9CCx//SGEiICTlIB+vgCBdZXlZmj9ElT0SePFX8g2eJYcwsgRz0Olkn2OBPc1QVw0tuK845FVu4xYo3szIljMIVoXUOiNI6HxM+Fsu7EXjAbt77Qpq89zvPeKkcHNs+0DPZtxxA3rpcAXh7mWBVFatElRidLTlnRUblSauGH4LY9ZQ5LBiBCKoS1xw8UdiIqCPve2Evg5IyZK1Cx+DsQUSKujzUsU24JHkwJSB5pUjg9zv50pBDC5E5hCBwaYcristmj1dfLk/oIHnmcgI4A3OUPzJz8QK/nplcWZAD4JkJP4RygN0AyXHB4MTcNp+dWve45jMwQTO7xm9WHuuM30+yAXLApNaDK26VpXPb6tzJHqM7uYSWfbGuaTFr8oCZkfpbQj+H6EKkZnNILljn1YyLU5O1m7JWh5gwuCRMrdKHvYXCa1hwS/0rYQCLYt5czYHW07q0RwCTcgDs9nk1o3OsjtCOTRrdF4Mb8VfDABKZCUAO1sM66BOAZd1iVBxjFEcUGF3vwmTajwXCq03jQlzfjoZBTMbnIBKsw62yhSSKioi65L1jaELmsCprdo6+FN9xI054CW2MJtjIHHMAUCUumuOEi91ws3xiaImaP0XN8dhfnRlxTTTHXCdkVm8apIHZmBBx6wajSzMVbnHvxMXrhAvxMr3E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" alt="继承与聚合的对比" tabindex="0" loading="lazy"><figcaption>继承与聚合的对比</figcaption></figure><p><em>封装器</em> 是装饰模式的别称， 这个称谓明确地表达了该模式的主要思想。 ​ “封装器” 是一个能与其他 “目标” 对象连接的对象。 封装器包含与目标对象相同的一系列方法， 它会将所有接收到的请求委派给目标对象。 但是， 封装器可以在将请求委派给目标前后对其进行处理， 所以可能会改变最终结果。</p><p>那么什么时候一个简单的封装器可以被称为是真正的装饰呢？ 正如之前提到的， 封装器实现了与其封装对象相同的接口。 因此从客户端的角度来看， 这些对象是完全一样的。 封装器中的引用成员变量可以是遵循相同接口的任意对象。 这使得你可以将一个对象放入多个封装器中， 并在对象中添加所有这些封装器的组合行为。</p><p>比如在消息通知示例中， 我们可以将简单邮件通知行为放在基类 <code>通知器</code> 中， 但将所有其他通知方法放入装饰中。</p><figure><img src="/blog/assets/img/solution2-zh.a4312667.png" alt="将各种通知方法放入装饰。" tabindex="0" loading="lazy"><figcaption>将各种通知方法放入装饰。</figcaption></figure><p>客户端代码必须将基础通知器放入一系列自己所需的装饰中。 因此最后的对象将形成一个栈结构。</p><figure><img src="/blog/assets/img/solution3-zh.801e0360.png" alt="程序可以配置由通知装饰构成的复杂栈。" tabindex="0" loading="lazy"><figcaption>程序可以配置由通知装饰构成的复杂栈。</figcaption></figure><p>实际与客户端进行交互的对象将是最后一个进入栈中的装饰对象。 由于所有的装饰都实现了与通知基类相同的接口， 客户端的其他代码并不在意自己到底是与 “纯粹” 的通知器对象， 还是与装饰后的通知器对象进行交互。</p><p>我们可以使用相同方法来完成其他行为 （例如设置消息格式或者创建接收人列表）。 只要所有装饰都遵循相同的接口， 客户端就可以使用任意自定义的装饰来装饰对象。</p><h2 id="真实世界类比" tabindex="-1"><a class="header-anchor" href="#真实世界类比"><span>真实世界类比</span></a></h2><figure><img src="/blog/assets/img/decorator-comic-1.97f6abbc.png" alt="穿上多件衣服将获得组合性的效果。" tabindex="0" loading="lazy"><figcaption>穿上多件衣服将获得组合性的效果。</figcaption></figure><p>穿衣服是使用装饰的一个例子。 觉得冷时， 你可以穿一件毛衣。 如果穿毛衣还觉得冷， 你可以再套上一件夹克。 如果遇到下雨， 你还可以再穿一件雨衣。 所有这些衣物都 “扩展” 了你的基本行为， 但它们并不是你的一部分， 如果你不再需要某件衣物， 可以方便地随时脱掉。</p><h2 id="装饰模式结构" tabindex="-1"><a class="header-anchor" href="#装饰模式结构"><span>装饰模式结构</span></a></h2><figure><img src="/blog/assets/img/structure.f620d116.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol><li><strong>部件</strong> （Component） 声明封装器和被封装对象的公用接口。</li><li><strong>具体部件</strong> （Concrete Component） 类是被封装对象所属的类。 它定义了基础行为， 但装饰类可以改变这些行为。</li><li><strong>基础装饰</strong> （Base Decorator） 类拥有一个指向被封装对象的引用成员变量。 该变量的类型应当被声明为通用部件接口， 这样它就可以引用具体的部件和装饰。 装饰基类会将所有操作委派给被封装的对象。</li><li><strong>具体装饰类</strong> （Concrete Decorators） 定义了可动态添加到部件的额外行为。 具体装饰类会重写装饰基类的方法， 并在调用父类方法之前或之后进行额外的行为。</li><li><strong>客户端</strong> （Client） 可以使用多层装饰来封装部件， 只要它能使用通用接口与所有对象互动即可。</li></ol><h2 id="伪代码" tabindex="-1"><a class="header-anchor" href="#伪代码"><span>伪代码</span></a></h2><p>在本例中，<strong>装饰</strong>模式能够对敏感数据进行压缩和加密， 从而将数据从使用数据的代码中独立出来。</p><figure><img src="/blog/assets/img/example.531cd0c0.png" alt="加密和压缩装饰的示例。" tabindex="0" loading="lazy"><figcaption>加密和压缩装饰的示例。</figcaption></figure><p>程序使用一对装饰来封装数据源对象。 这两个封装器都改变了从磁盘读写数据的方式：</p><ul><li>当数据即将被<strong>写入磁盘</strong>前， 装饰对数据进行加密和压缩。 在原始类对改变毫无察觉的情况下， 将加密后的受保护数据写入文件。</li><li>当数据刚<strong>从磁盘读出</strong>后， 同样通过装饰对数据进行解压和解密。</li></ul><p>装饰和数据源类实现同一接口， 从而能在客户端代码中相互替换。</p><div class="language-py line-numbers-mode" data-highlighter="shiki" data-ext="py" data-title="py" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 装饰可以改变组件接口所定义的操作。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">interface DataSource </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">writeData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(data)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">readData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 具体组件提供操作的默认实现。这些类在程序中可能会有几个变体。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> FileDataSource implements DataSource </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    constructor </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">FileDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(filename) { …… }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">writeData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(data) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 将数据写入文件。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">readData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():data </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 从文件读取数据。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 装饰基类和其他组件遵循相同的接口。该类的主要任务是定义所有具体装饰的封</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 装接口。封装的默认实现代码中可能会包含一个保存被封装组件的成员变量，并</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 且负责对其进行初始化。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> DataSourceDecorator implements DataSource </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    protected field wrappee: DataSource</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    constructor </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">DataSourceDecorator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(source: DataSource) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        wrappee </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> source</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 装饰基类会直接将所有工作分派给被封装组件。具体装饰中则可以新增一些</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 额外的行为。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">writeData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(data) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        wrappee.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">writeData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(data)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 具体装饰可调用其父类的操作实现，而不是直接调用被封装对象。这种方式</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 可简化装饰类的扩展工作。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">readData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():data </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> wrappee.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">readData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 具体装饰必须在被封装对象上调用方法，不过也可以自行在结果中添加一些内容。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 装饰必须在调用封装对象之前或之后执行额外的行为。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> EncryptionDecorator extends DataSourceDecorator </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">writeData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(data) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 1. 对传递数据进行加密。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 2. 将加密后数据传递给被封装对象 writeData（写入数据）方法。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">readData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():data </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 1. 通过被封装对象的 readData（读取数据）方法获取数据。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 2. 如果数据被加密就尝试解密。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 3. 返回结果。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 你可以将对象封装在多层装饰中。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CompressionDecorator extends DataSourceDecorator </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">writeData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(data) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 1. 压缩传递数据。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 2. 将压缩后数据传递给被封装对象 writeData（写入数据）方法。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">readData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():data </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 1. 通过被封装对象的 readData（读取数据）方法获取数据。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 2. 如果数据被压缩就尝试解压。</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 3. 返回结果。</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 选项 1：装饰组件的简单示例</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Application </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">dumbUsageExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        source </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">FileDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;somefile.dat&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        source.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">writeData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(salaryRecords)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 已将明码数据写入目标文件。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        source </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">CompressionDecorator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(source)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        source.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">writeData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(salaryRecords)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 已将压缩数据写入目标文件。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        source </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">EncryptionDecorator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(source)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 源变量中现在包含：</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # Encryption &gt; Compression &gt; FileDataSource</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        source.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">writeData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(salaryRecords)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # 已将压缩且加密的数据写入目标文件。</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 选项 2：客户端使用外部数据源。SalaryManager（工资管理器）对象并不关心</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 数据如何存储。它们会与提前配置好的数据源进行交互，数据源则是通过程序配</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 置器获取的。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SalaryManager </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    field source: DataSource</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    constructor </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">SalaryManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(source: DataSource) { …… }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> source.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">readData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        source.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">writeData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(salaryRecords)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # ……其他有用的方法……</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 程序可在运行时根据配置或环境组装不同的装饰堆桟。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ApplicationConfigurator </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">configurationExample</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        source </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">FileDataSource</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;salary.dat&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (enabledEncryption)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            source </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">EncryptionDecorator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(source)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (enabledCompression)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            source </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">CompressionDecorator</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(source)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        logger </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">SalaryManager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(source)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        salary </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> logger.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # ……</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="装饰模式优缺点" tabindex="-1"><a class="header-anchor" href="#装饰模式优缺点"><span>装饰模式优缺点</span></a></h2><p>√ 你无需创建新子类即可扩展对象的行为。<br> √ 你可以在运行时添加或删除对象的功能。<br> √ 你可以用多个装饰封装对象来组合几种行为。<br> √ 单一职责原则。 你可以将实现了许多不同行为的一个大类拆分为多个较小的类。<br> × 在封装器栈中删除特定封装器比较困难。<br> × 实现行为不受装饰栈顺序影响的装饰比较困难。<br> × 各层的初始化配置代码看上去可能会很糟糕。</p><h2 id="与其他模式的关系" tabindex="-1"><a class="header-anchor" href="#与其他模式的关系"><span>与其他模式的关系</span></a></h2><ul><li><a class="route-link" href="/blog/posts/brain-boom/design-patterns/structural/adapter.html"><strong>适配器模式</strong></a>可以对已有对象的接口进行修改， <strong>装饰模式</strong>则能在不改变对象接口的前提下强化对象功能。 此外，<em>装饰</em> 还支持递归组合，<em>适配器</em> 则无法实现。</li><li><a class="route-link" href="/blog/posts/brain-boom/design-patterns/structural/adapter.html"><strong>适配器</strong></a>能为被封装对象提供不同的接口， <a class="route-link" href="/blog/posts/brain-boom/design-patterns/structural/proxy.html"><strong>代理模式</strong></a>能为对象提供相同的接口， <strong>装饰</strong>则能为对象提供加强的接口。</li><li><a class="route-link" href="/blog/posts/brain-boom/design-patterns/behavioral/chain-of-responsibility.html"><strong>责任链模式</strong></a>和<strong>装饰模式</strong>的类结构非常相似。 两者都依赖递归组合将需要执行的操作传递给一系列对象。 但是， 两者有几点重要的不同之处。<br><a class="route-link" href="/blog/posts/brain-boom/design-patterns/behavioral/chain-of-responsibility.html"><strong>责任链</strong></a>的管理者可以相互独立地执行一切操作， 还可以随时停止传递请求。 另一方面， 各种 <em>装饰</em> 可以在遵循基本接口的情况下扩展对象的行为。 此外， 装饰无法中断请求的传递。</li><li><a class="route-link" href="/blog/posts/brain-boom/design-patterns/structural/composite.html"><strong>组合模式</strong></a>和<strong>装饰</strong>的结构图很相似， 因为两者都依赖递归组合来组织无限数量的对象。<br><em>装饰</em> 类似于 <em>组合</em>， 但其只有一个子组件。 此外还有一个明显不同：<em>装饰</em> 为被封装对象添加了额外的职责，<em>组合</em> 仅对其子节点的结果进行了 “求和”。<br> 但是， 模式也可以相互合作： 你可以使用 <em>装饰</em> 来扩展 <em>组合</em> 树中特定对象的行为。</li><li>大量使用<a class="route-link" href="/blog/posts/brain-boom/design-patterns/structural/composite.html"><strong>组合</strong></a>和<strong>装饰</strong>的设计通常可从对于<a class="route-link" href="/blog/posts/brain-boom/design-patterns/creational/prototype.html"><strong>原型模式</strong></a>的使用中获益。 你可以通过该模式来复制复杂结构， 而非从零开始重新构造。</li><li><strong>装饰</strong>可让你更改对象的外表， <a class="route-link" href="/blog/posts/brain-boom/design-patterns/behavioral/strategy.html"><strong>策略模式</strong></a>则让你能够改变其本质。</li><li><strong>装饰</strong>和<a class="route-link" href="/blog/posts/brain-boom/design-patterns/structural/proxy.html"><strong>代理</strong></a>有着相似的结构， 但是其意图却非常不同。 这两个模式的构建都基于组合原则， 也就是说一个对象应该将部分工作委派给另一个对象。 两者之间的不同之处在于 <em>代理</em> 通常自行管理其服务对象的生命周期， 而 <em>装饰</em> 的生成则总是由客户端进行控制。</li></ul></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/4/10 08:16:01</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: miaoxi1110@gmail.com">damiaoxi</span>,<!--]--><!--[--><span class="vp-meta-info" title="email: jianshu.shi@eisgroup.com">Jianshu</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/blog/posts/brain-boom/design-patterns/structural/bridge.html" aria-label="桥接模式" iconsizing="both"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/structural/bridge/bridge-mini.png" alt aria-hidden no-view height="1em" sizing="height">桥接模式</div></a><a class="route-link auto-link next" href="/blog/posts/brain-boom/design-patterns/structural/composite.html" aria-label="组合模式" iconsizing="both"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">组合模式<img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/structural/composite/composite-mini.png" alt aria-hidden no-view height="1em" sizing="height"></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">默认页脚</div><div class="vp-copyright">Copyright © 2025 Jianshu.Shi </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script src="/blog/assets/js/runtime~app.bbf52072.js" defer></script><script src="/blog/assets/js/1386.bd671d60.js" defer></script><script src="/blog/assets/js/app.002a75ee.js" defer></script>
  </body>
</html>
