<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.71" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://mister-hope.github.io/blog/posts/brain-boom/design-patterns/behavioral/command.html"><meta property="og:site_name" content="大喵喜的技术杂货铺"><meta property="og:title" content="命令模式"><meta property="og:description" content="意图 命令模式是一种行为设计模式， 它可将请求转换为一个包含与请求相关的所有信息的独立对象。 该转换让你能根据不同的请求将方法参数化、 延迟请求执行或将其放入队列中， 且能实现可撤销操作。 问题 假如你正在开发一款新的文字编辑器， 当前的任务是创建一个包含多个按钮的工具栏， 并让每个按钮对应编辑器的不同操作。 你创建了一个非常简洁的 按钮类， 它不仅可..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-04-10T08:16:01.000Z"><meta property="article:modified_time" content="2025-04-10T08:16:01.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"命令模式","image":[""],"dateModified":"2025-04-10T08:16:01.000Z","author":[{"@type":"Person","name":"Jianshu.Shi","url":"https://mister-hope.com"}]}</script><link rel="icon" href="/blog/favicon.ico"><title>命令模式 | 大喵喜的技术杂货铺</title><meta name="description" content="意图 命令模式是一种行为设计模式， 它可将请求转换为一个包含与请求相关的所有信息的独立对象。 该转换让你能根据不同的请求将方法参数化、 延迟请求执行或将其放入队列中， 且能实现可撤销操作。 问题 假如你正在开发一款新的文字编辑器， 当前的任务是创建一个包含多个按钮的工具栏， 并让每个按钮对应编辑器的不同操作。 你创建了一个非常简洁的 按钮类， 它不仅可...">
    <link rel="stylesheet" href="/blog/assets/css/styles.bac1a030.css">
    <link rel="preload" href="/blog/assets/js/runtime~app.fb0bef5b.js" as="script"><link rel="preload" href="/blog/assets/css/styles.bac1a030.css" as="style"><link rel="preload" href="/blog/assets/js/1386.bd671d60.js" as="script"><link rel="preload" href="/blog/assets/js/app.bdb18651.js" as="script">
    <link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_dataStorage.html.f057a273.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_operator.html.80692aec.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_communicationBetweenTabs.html.feef17bd.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_link.html.440bc055.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_class_structure.html.019dfb59.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_this.html.1b8da415.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_tree.html.90fae623.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_heap.html.3a1ebdf0.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_sort.html.abb2f4e8.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_promise.html.6699889d.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_dictionary.html.8892c2e2.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_command.html.56bcf264.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_typeConversion.html.6fe58a44.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_prototype.html.3404c526.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_eventLoop.html.6cf78d04.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_dynamicProgramming.html.268d3982.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_decorator.html.22c448f0.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_scopeAndScopeChain.html.0d1f9510.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_debounceAndThrottle.html.31bc1e96.js" as="script"><link rel="prefetch" href="/blog/assets/js/8300.fd2e2f82.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_chain-of-responsibility.html.ac4c1140.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_queue.html.e22ee80d.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_state.html.bb2fdc7e.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_valueAndReference.html.cee2140b.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_webWorker.html.15e55e7f.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_proxy.html.8c97d5de.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_search.html.a13c259f.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_browserCache.html.f7f2ee2f.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_iterator.html.ffb56da7.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_set.html.56746320.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_let_var_const.html.0b5f7880.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_memento.html.48424784.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_mediator.html.aeea43f3.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_template-method.html.37f1b713.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_observer.html.51b27082.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_ExecutionStackAndContext.html.d4705ae3.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_builder.html.b774e070.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_DOMEventPropagationMechanism.html.4f131162.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_prototype.html.2bb1736f.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_crossDomain-CORS.html.7e5f4642.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_JWT.html.e54b9f4b.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_strictMode.html.cce375d4.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_backtracking.html.380b12f5.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_strategy.html.4439c780.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_visitor.html.cadaadb3.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_closure.html.430e5870.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_composite.html.5974e7c6.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_abstract.html.a2b7cf79.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_browserRenderFlow.html.554b5580.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_fileUpload.html.3af34ecd.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_stack.html.01b933b1.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_greedy.html.0dbfe60e.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_packagesType.html.9c1dae24.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_factory.html.80179dc2.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_singleton.html.d62f5501.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_floatingPrecisionProblem.html.026ab721.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_flyweight.html.d0621147.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_resourceKeywords.html.7f5d0421.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_preventDefaultBehaviors.html.d90cd700.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_cookieAndStorage.html.916bf3e1.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_GC_MemoryLeak.html.d6bf91da.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_negotiatedCache.html.851a7e8a.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_facade.html.a82e4249.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_HTTPVersionsDiffer.html.ab72ec4a.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_componentsOfBrowser.html.2b1bfea6.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_webSocket.html.d577c368.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_SSL_TLS_HTTPS.html.5963c02e.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_tcp.html.7ca63723.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_requestMethods.html.f7aff98e.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_crossDomain-proxy.html.5c0f9c5a.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_FiveLayerNetworkModel.html.984db039.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_breakpointResume.html.bef1e74a.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_networkPerformanceOptimization.html.c4844516.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_sameOriginPolicy.html.5fc42416.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_CSRFAttack.html.8dbe697f.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_encrypt.html.0d4e58bb.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_DNS.html.b7b3afe8.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_session.html.c60cb999.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_XSSAttack.html.d661ab25.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_adapter.html.53101580.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_crossDomain-JSONP.html.564ac629.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_fileDownload.html.5ac327d4.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_index.html.5932a28f.js" as="script"><link rel="prefetch" href="/blog/assets/js/index.html.3d4a7c6a.js" as="script"><link rel="prefetch" href="/blog/assets/js/intro.html.2a321f1c.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_index.html.6499b16c.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_creational_index.html.088353bb.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_behavioral_index.html.45139b31.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_frontend-engineering_webpack.html.513f5ec5.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_JavaScript_index.html.7a7d6a06.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_frontend-engineering_index.html.71d6e4e2.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_browser_index.html.c03d801c.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_data-structure_index.html.af3e5d16.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_network_index.html.f8e6491c.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_more-than-code_index.html.2be4a80b.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_design-patterns_structural_bridge.html.af45c876.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_coding-more_index.html.b9697908.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_brain-boom_index.html.98a50208.js" as="script"><link rel="prefetch" href="/blog/assets/js/posts_index.html.be4a3dab.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_数据结构与算法_index.html.8ffe3c4f.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_前端工程化_index.html.c3971deb.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_设计模式_index.html.89c54783.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_浏览器_index.html.93ac0abe.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_javascript_index.html.c8d93b33.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_网络_index.html.b8f96991.js" as="script"><link rel="prefetch" href="/blog/assets/js/404.html.1ee3259a.js" as="script"><link rel="prefetch" href="/blog/assets/js/timeline_index.html.c94a1e03.js" as="script"><link rel="prefetch" href="/blog/assets/js/category_index.html.a6faf54c.js" as="script"><link rel="prefetch" href="/blog/assets/js/article_index.html.6593660e.js" as="script"><link rel="prefetch" href="/blog/assets/js/tag_index.html.90ad7b55.js" as="script"><link rel="prefetch" href="/blog/assets/js/star_index.html.4b45c567.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/blog/" aria-label="带我回家"><img class="vp-nav-logo" src="/blog/logo.svg" alt><!----><span class="vp-site-name hide-in-pad">大喵喜的技术杂货铺</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/" aria-label="主页" iconsizing="height"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" height="1em" sizing="height"></iconify-icon><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="代码不止"><!--[--><iconify-icon class="vp-icon" icon="proicons:code" height="1em" sizing="height"></iconify-icon>代码不止<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/coding-more/JavaScript/" aria-label="JavaScript" iconsizing="both"><!--[--><img class="vp-icon" src="https://www.runoob.com/wp-content/uploads/2013/07/js-logo.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->JavaScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/coding-more/frontend-engineering/" aria-label="前端工程化" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="eos-icons:organisms" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->前端工程化<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="不止代码"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:code-off-rounded" height="1em" sizing="height"></iconify-icon>不止代码<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/more-than-code/browser/" aria-label="浏览器" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="eos-icons:application-window-outlined" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->浏览器<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/more-than-code/network/" aria-label="网络" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="line-md:spotify" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->网络<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="脑力涌现"><!--[--><iconify-icon class="vp-icon" icon="eos-icons:neural-network" height="1em" sizing="height"></iconify-icon>脑力涌现<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/blog/posts/brain-boom/data-structure/" aria-label="数据结构与算法" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/icon/data-structure.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->数据结构与算法<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/blog/posts/brain-boom/design-patterns/" aria-label="设计模式" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="mdi:lightbulb-on-10" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->设计模式<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/blog/" aria-label="主页" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->主页<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="proicons:code" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">代码不止</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="material-symbols:code-off-rounded" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">不止代码</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="eos-icons:neural-network" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">脑力涌现</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="vp-icon" src="/blog/assets/icon/data-structure.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><span class="vp-sidebar-title">数据结构与算法</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="mdi:lightbulb-on-10" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">设计模式</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="material-symbols:new-window-rounded" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">创建型模式</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><iconify-icon class="vp-icon" icon="material-symbols:view-in-ar-outline-rounded" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">结构型模式</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><iconify-icon class="vp-icon" icon="material-symbols:partner-exchange-rounded" width="1em" height="1em" sizing="both"></iconify-icon><span class="vp-sidebar-title">行为型模式</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/behavioral/chain-of-responsibility.html" aria-label="责任链模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/chain-of-responsibility/chain-of-responsibility-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->责任链模式<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/blog/posts/brain-boom/design-patterns/behavioral/command.html" aria-label="命令模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/command/command-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->命令模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/behavioral/iterator.html" aria-label="迭代器模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/iterator/iterator-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->迭代器模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/behavioral/mediator.html" aria-label="中介者模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/mediator/mediator-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->中介者模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/behavioral/memento.html" aria-label="备忘录模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/memento/memento-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->备忘录模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/behavioral/observer.html" aria-label="观察者模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/observer/observer-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->观察者模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/behavioral/state.html" aria-label="状态模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/state/state-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->状态模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/behavioral/strategy.html" aria-label="策略模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/strategy/strategy-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->策略模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/behavioral/template-method.html" aria-label="模板方法模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/template-method/template-method-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->模板方法模式<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/blog/posts/brain-boom/design-patterns/behavioral/visitor.html" aria-label="访问者模式" iconsizing="both"><!--[--><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/visitor/visitor-mini.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->访问者模式<!----></a></li></ul></section></li></ul></section></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/command/command-mini.png" alt aria-hidden no-view height="1em" sizing="height">命令模式</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://mister-hope.com" target="_blank" rel="noopener noreferrer">Jianshu.Shi</a></span><span property="author" content="Jianshu.Shi"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025年3月25日</span><meta property="datePublished" content="2025-03-25T09:55:34.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 12 分钟</span><meta property="timeRequired" content="PT12M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8 clickable" role="navigation">设计模式</span><!--]--><meta property="articleSection" content="设计模式"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><!--[--><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#意图">意图</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#问题">问题</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#解决方案">解决方案</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#真实世界类比">真实世界类比</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#命令模式结构">命令模式结构</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#伪代码">伪代码</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#命令模式优缺点">命令模式优缺点</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#与其他模式的关系">与其他模式的关系</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--]--><!----></aside></div><!----><div class="theme-hope-content" vp-content><h2 id="意图" tabindex="-1"><a class="header-anchor" href="#意图"><span>意图</span></a></h2><p><strong>命令模式</strong>是一种行为设计模式， 它可将请求转换为一个包含与请求相关的所有信息的独立对象。 该转换让你能根据不同的请求将方法参数化、 延迟请求执行或将其放入队列中， 且能实现可撤销操作。</p><figure><img src="/blog/assets/img/command-zh.805d8768.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h2><p>假如你正在开发一款新的文字编辑器， 当前的任务是创建一个包含多个按钮的工具栏， 并让每个按钮对应编辑器的不同操作。 你创建了一个非常简洁的 按钮类， 它不仅可用于生成工具栏上的按钮， 还可用于生成各种对话框的通用按钮。</p><figure><img src="data:image/png;base64,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" alt="应用中的所有按钮都可以继承相同的类" tabindex="0" loading="lazy"><figcaption>应用中的所有按钮都可以继承相同的类</figcaption></figure><p>尽管所有按钮看上去都很相似， 但它们可以完成不同的操作 （打开、 保存、 打印和应用等）。 你会在哪里放置这些按钮的点击处理代码呢？ 最简单的解决方案是在使用按钮的每个地方都创建大量的子类。 这些子类中包含按钮点击后必须执行的代码。</p><figure><img src="data:image/png;base64,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" alt="大量的按钮子类。 没关系的。大量的按钮子类。 没关系的。" tabindex="0" loading="lazy"><figcaption>大量的按钮子类。 没关系的。大量的按钮子类。 没关系的。</figcaption></figure><p>你很快就意识到这种方式有严重缺陷。 首先， 你创建了大量的子类， 当每次修改基类 按钮时， 你都有可能需要修改所有子类的代码。 简单来说， GUI 代码以一种拙劣的方式依赖于业务逻辑中的不稳定代码。</p><figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAABuCAMAAADIxzC7AAABj1BMVEVHcExGRkZISEhISEhJSUlJSUl6enrj4+P39/fw8PDV1dXOzs7f39/z8/Pr6+vd3d3b29vMzMzY2Njt7e319fWgoKBOTk5ZWVnFxcWpqalubm7JyclfX19NTU2VlZV9fX3IyMhra2vo6Oi5ublKSkpTU1OlpaViYmJVVVWcnJzR0dGMjIySkpLm5uZycnKxsbHCwsKIiIhcXFxnZ2e9vb2EhISjo6NRUVF3d3e2traYmJivr6+/v79kZGSPj4/h4eGAgICsrKyenp5HR0e5ublISEhHR0cjIyPl5eW+vr5ISEhCQkJnZ2dISEhISEiOjo7h4eFMTEzy8vJKSkpHR0dFRUXy8vJmZmZJSUlISEhJSUn29vZsbGxJSUlISEg+Pj5LS0v29vZHR0dISEjExMRISEjt7e2YmJhISEhubm7w8PD29vaioqLg4OD19fVJSUn39/doaGh6enqFhYX29vZKSkqkpKT29vZbW1vT09P19fVmZmZycnK1tbWfn5+Tk5PPz8+WlpZVVVXe3t5XV1c5dnnEAAAAhXRSTlMAGqbn/+7/////////////////////////////////////////////////////////////////////////////////X+riSQMmsaARzr1+1Q20xlQoIFyj966VNvPUywgweDlD7IdM7nLsGOpS8WX8opvEqpVY8a3p28zt7JRv1PjC7WzcJ2NXPQAAC3NJREFUeAHs0YEJRCEQQ0HVfLX/iq+JBZZjpoJHMv4QAAAAwFw7Lew16/ui70sb36zu0zdWzn0t3JNV3adv7NzXxM2u7tM3ktdGUt2nz4AONqCDHexgBzvYwT9izGw5cSyLoi8r7C3SV2Aho8xrxChmMwiBBYnH+v+P6lYDilJGqCerKo/ns3nYZy3Pv0ewU/t2Z8pjt15ruH83QFO/95oqHd/4l8cZ/YdHVdyvnFx5bsxvFfzQAoLvZfEPAGztbxX82AbCjsrG0lU2NeipdDr0q+9XTq4s92DwGwUPIRpBoywfE00CmJp8M5j1jTRfPP1lgpcjGEU8qGz6kHHV6t8KfsoEr7ubyvuVkCvJSwQXCBbgVis4ZuvKHapccJK9opZv7sFk9Lp/meBN5s9slv9O8MRI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" alt="多个类实现同一功能。" tabindex="0" loading="lazy"><figcaption>多个类实现同一功能。</figcaption></figure><p>还有一个部分最难办。 复制/粘贴文字等操作可能会在多个地方被调用。 例如用户可以点击工具栏上小小的 “复制” 按钮， 或者通过上下文菜单复制一些内容， 又或者直接使用键盘上的 Ctrl+C 。</p><p>我们的程序最初只有工具栏， 因此可以使用按钮子类来实现各种不同操作。 换句话来说， ​ <code>复制按钮 Copy­Button</code> 子类包含复制文字的代码是可行的。 在实现了上下文菜单、 快捷方式和其他功能后， 你要么需要将操作代码复制进许多个类中， 要么需要让菜单依赖于按钮， 而后者是更糟糕的选择。</p><h2 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h2><p>优秀的软件设计通常会将关注点进行分离， 而这往往会导致软件的分层。 最常见的例子： 一层负责用户图像界面； 另一层负责业务逻辑。 GUI 层负责在屏幕上渲染美观的图形， 捕获所有输入并显示用户和程序工作的结果。 当需要完成一些重要内容时 （比如计算月球轨道或撰写年度报告）， GUI 层则会将工作委派给业务逻辑底层。</p><p>这在代码中看上去就像这样： 一个 GUI 对象传递一些参数来调用一个业务逻辑对象。 这个过程通常被描述为一个对象发送请求给另一个对象。</p><figure><img src="data:image/png;base64,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" alt="GUI 层可以直接访问业务逻辑层。" tabindex="0" loading="lazy"><figcaption>GUI 层可以直接访问业务逻辑层。</figcaption></figure><p>命令模式建议 GUI 对象不直接提交这些请求。 你应该将请求的所有细节 （例如调用的对象、 方法名称和参数列表） 抽取出来组成命令类， 该类中仅包含一个用于触发请求的方法。</p><p>命令对象负责连接不同的 GUI 和业务逻辑对象。 此后， GUI 对象无需了解业务逻辑对象是否获得了请求， 也无需了解其对请求进行处理的方式。 GUI 对象触发命令即可， 命令对象会自行处理所有细节工作。</p><figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAiYAAAC+CAMAAAA2ujRzAAABqlBMVEVHcExNTU1PT09CQkJLNjhFRUVGRkZLS0tGRkZISEhHR0hISEhERERISEhISEhISEhISEhISEhISEhHR0dISEhISEhHR0dJSUlISEhHR0dHSEhHR0dHSEhISUlISEhHR0dHR0dISEhHR0fCwsLDw8PCwsLBwcG/v7/CwsLCwsK0tLTCwsLDw8PDw8PDw8PCwsLAwMC+vr67u7vDw8PCwsJ6e3vj4+P39/cyODo2Oz3q6ura2trU1NS6vbZmZmanqaZubm61t7GKiolaW1ukpKNMTExiYmJTU1P29PScnJxqa2ry8fGOjo6Tk5OsrqqAgIDKysqfoZ4wNzm2trZzdHSGhoawsq65vLW8vLxmZ2esrKyzs7NkZGRlZWVlZWVlZWVmZmZlZmZmZmbNLTbNLjfOLjbOLzfOLzbjl5uTppK2qqqgrJ716+vuzc/sw8Xw1tfgiY3QOkHpsrXmpqnbb3Tln6PZY2nTR07WVlzdd3zLLTTIKTDOLjbMLjbGJzXz4eLNLzbNLjbrur2+vr5TWFmFiIm1trfDw8OGiInExMSgoaLDw8PDw8PCwsKsnuwYAAAAjnRSTlMAMygLBBohFhH3ua8t8JiPzvyndITnSP+hPcjBbNfee1JjWbX/tCcc55wJ+OL+7X4wLw9V3v/////4////////////////////////////////XP///////7P//1Hr1HL6zJJ2zPf/wv///////////////////////0cl5mIO/6GE/2fOoYV/2UGQvofZQcSp2AAAFjxJREFUeAHs2NuOqzoChOECDASMOQVcmDO8/0OOA0mvdJZ2ZzQaKb0lfxeWufYvlQScnziO4ziO4ziO4ziO58P5lwgEIASehJ7Aj6IY/w+XJMUXXz7JAFxewPkklQNF8txNWXn44tUxcJUPDSzZAtDyFOAtzSeVwENHHw+GfV3XStljoAFQ8bsAv4nLRLIfTxcAJiljyDafpnwu83kAomgeougysmiaJmWMtzS7ZVkmtVgDBaylsVKmjRWdmWgAfQpgPTLZxpuCw3gScH5PJpea6kTusHTVB1KiK1AvqAdkPDQjBYDxv8vEAJAzrIYCgCCTB+ozk6HrOtXaY6DBw8YVzofFz5kEsMxMNrACySsO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" alt="通过命令访问业务逻辑层。" tabindex="0" loading="lazy"><figcaption>通过命令访问业务逻辑层。</figcaption></figure><p>下一步是让所有命令实现相同的接口。 该接口通常只有一个没有任何参数的执行方法， 让你能在不和具体命令类耦合的情况下使用同一请求发送者执行不同命令。 此外还有额外的好处， 现在你能在运行时切换连接至发送者的命令对象， 以此改变发送者的行为。</p><p>你可能会注意到遗漏的一块拼图——请求的参数。 GUI 对象可以给业务层对象提供一些参数。 但执行命令方法没有任何参数， 所以我们如何将请求的详情发送给接收者呢？ 答案是： 使用数据对命令进行预先配置， 或者让其能够自行获取数据。</p><figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbgAAADwCAMAAABFaIE0AAABa1BMVEVHcExLS0tISEhISEhJSUlJSUl6enrj4+P39/fm5uapqanr6+vt7e20tLSmpqa9vb319fWvr6/w8PBwcHBLS0tgYGBaWlrp6em6urrGxsZNTU3g4ODy8vLX19fZ2dne3t7z8/PDw8PAwMDJycnPz8/T09PMzMyOjo6dnZ2GhoaxsbGTk5N0dHRUVFRdXV1mZma3t7etra3i4uLb29tsbGyjo6OYmJhpaWl9fX1YWFhQUFCampqBgYFjY2OKiopWVlZlZWVmZmZkZGRRUVFlZWWgoKBlZWVmZmZkZGRSUlJmZmZlZWVnZ2dlZWVmZmZRUVFjY2NJSUlGRkb29vZJSUlISEhJSUlISEhISEh4eHj29vampqb39/dJSUmcnJxJSUlISEjg4OD29vZKSkpbW1vb29vW1tZISEhISEiOjo6mpqbw8PC0tLT39/dVVVX29vb09PRYWFh9fX19fX3z8/PAwMCMjIzQ0ND29vYuAYQTAAAAeXRSTlMAHKbm/+3///////////////////////////////////////////////////////////////////////////8KovVCA///suOBI9rBZZvLLVA1FGqzkPxawZg3vb954PVG8qXO6JxTadz7Stdt3/LrFZyz3CqbmeWw/5ii1wAAEuxJREFUeAHsnIl6oujWhU91raPLmSBKRFEccIgiJmpUSlKdSlJz1Rnu/2J+NdGEPKk63V2iD/3vtwfzpYcP1su4wf0PQRAEQRAEQRAEQRCeILz67TXC5PVvryTkMLz9E2HzTzEXAr8hFmeYxGP4TWLeP68RZ7jE8Vpi3j8AwwaQmEWcIOJEnIgTcYKIC6EyEUJpYr/iEskUf0o6k80p4Ys7Zn7hVia2pYk9i0vihI+o5HPyWqEYvrij5hduZWJbmtizOP00zR0lo8xn6MiywjDFHT+/cCsT29LEnsWppspKlbVcyWIii7qZJuONXJysVCvNpt5A0tSZatVtrlDs00aCTLdP7b2JO35+AEMH2Ju4Tpe9MzZh00YPQF7pA0CDSQ3QTmljAOcEAJJJA0CPTMcAFGgPN0M130y49v7EHSa/yIurIzNC6UFcsZXooaWfo3WhjrVeeewOaWNij9NNnFyodkNP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" alt="GUI 对象将命令委派给命令对象。" tabindex="0" loading="lazy"><figcaption>GUI 对象将命令委派给命令对象。</figcaption></figure><p>让我们回到文本编辑器。 应用命令模式后， 我们不再需要任何按钮子类来实现点击行为。 我们只需在 <code>按钮Button</code> 基类中添加一个成员变量来存储对于命令对象的引用， 并在点击后执行该命令即可。</p><p>你需要为每个可能的操作实现一系列命令类， 并且根据按钮所需行为将命令和按钮连接起来。</p><p>其他菜单、 快捷方式或整个对话框等 GUI 元素都可以通过相同方式来实现。 当用户与 GUI 元素交互时， 与其连接的命令将会被执行。 现在你很可能已经猜到了， 与相同操作相关的元素将会被连接到相同的命令， 从而避免了重复代码。</p><p>最后， 命令成为了减少 GUI 和业务逻辑层之间耦合的中间层。 而这仅仅是命令模式所提供的一小部分好处！</p><h2 id="真实世界类比" tabindex="-1"><a class="header-anchor" href="#真实世界类比"><span>真实世界类比</span></a></h2><figure><img src="/blog/assets/img/command-comic-1.3afe1fe6.png" alt="在餐厅里点餐。" tabindex="0" loading="lazy"><figcaption>在餐厅里点餐。</figcaption></figure><p>在市中心逛了很久的街后， 你找到了一家不错的餐厅， 坐在了临窗的座位上。 一名友善的服务员走近你， 迅速记下你点的食物， 写在一张纸上。 服务员来到厨房， 把订单贴在墙上。 过了一段时间， 厨师拿到了订单， 他根据订单来准备食物。 厨师将做好的食物和订单一起放在托盘上。 服务员看到托盘后对订单进行检查， 确保所有食物都是你要的， 然后将食物放到了你的桌上。</p><p>那张纸就是一个命令， 它在厨师开始烹饪前一直位于队列中。 命令中包含与烹饪这些食物相关的所有信息。 厨师能够根据它马上开始烹饪， 而无需跑来直接和你确认订单详情。</p><h2 id="命令模式结构" tabindex="-1"><a class="header-anchor" href="#命令模式结构"><span>命令模式结构</span></a></h2><figure><img src="/blog/assets/img/structure.2edea4cc.png" alt="在餐厅里点餐。" tabindex="0" loading="lazy"><figcaption>在餐厅里点餐。</figcaption></figure><ul><li><strong>发送者</strong> （Sender）——亦称 “触发者 （Invoker）”——类负责对请求进行初始化， 其中必须包含一个成员变量来存储对于命令对象的引用。 发送者触发命令， 而不向接收者直接发送请求。 注意， 发送者并不负责创建命令对象： 它通常会通过构造函数从客户端处获得预先生成的命令。</li><li><strong>命令</strong> （Command） 接口通常仅声明一个执行命令的方法。</li><li><strong>具体命令</strong> （Concrete Commands） 会实现各种类型的请求。 具体命令自身并不完成工作， 而是会将调用委派给一个业务逻辑对象。 但为了简化代码， 这些类可以进行合并。<br> 接收对象执行方法所需的参数可以声明为具体命令的成员变量。 你可以将命令对象设为不可变， 仅允许通过构造函数对这些成员变量进行初始化。</li><li><strong>接收者</strong> （Receiver） 类包含部分业务逻辑。 几乎任何对象都可以作为接收者。 绝大部分命令只处理如何将请求传递到接收者的细节， 接收者自己会完成实际的工作。</li><li><strong>客户端</strong> （Client） 会创建并配置具体命令对象。 客户端必须将包括接收者实体在内的所有请求参数传递给命令的构造函数。 此后， 生成的命令就可以与一个或多个发送者相关联了。</li></ul><h2 id="伪代码" tabindex="-1"><a class="header-anchor" href="#伪代码"><span>伪代码</span></a></h2><p>在本例中， 命令模式会记录已执行操作的历史记录， 以在需要时撤销操作。</p><figure><img src="/blog/assets/img/example.548b03bc.png" alt="文本编辑器中的可撤销操作。" tabindex="0" loading="lazy"><figcaption>文本编辑器中的可撤销操作。</figcaption></figure><p>有些命令会改变编辑器的状态 （例如剪切和粘贴）， 它们可在执行相关操作前对编辑器的状态进行备份。 命令执行后会和当前点备份的编辑器状态一起被放入命令历史 （命令对象栈）。 此后， 如果用户需要进行回滚操作， 程序可从历史记录中取出最近的命令， 读取相应的编辑器状态备份， 然后进行恢复。</p><p>客户端代码 （GUI 元素和命令历史等） 没有和具体命令类相耦合， 因为它通过命令接口来使用命令。 这使得你能在无需修改已有代码的情况下在程序中增加新的命令。</p><div class="language-py line-numbers-mode" data-highlighter="shiki" data-ext="py" data-title="py" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 命令基类会为所有具体命令定义通用接口。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">abstract </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Command </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    protected field app: Application</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    protected field editor: Editor</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    protected field backup: text</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    constructor </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(app: Application, editor: Editor) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        this.app </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> app</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        this.editor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> editor</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 备份编辑器状态。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">saveBackup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        backup </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> editor.text</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 恢复编辑器状态。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">undo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        editor.text </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> backup</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 执行方法被声明为抽象以强制所有具体命令提供自己的实现。该方法必须根</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 据命令是否更改编辑器的状态返回 true 或 false。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    abstract method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 这里是具体命令。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CopyCommand extends Command </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 复制命令不会被保存到历史记录中，因为它没有改变编辑器的状态。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        app.clipboard </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> editor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">getSelection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CutCommand extends Command </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 剪切命令改变了编辑器的状态，因此它必须被保存到历史记录中。只要方法</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 返回 true，它就会被保存。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">        saveBackup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        app.clipboard </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> editor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">getSelection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        editor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">deleteSelection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> PasteCommand extends Command </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">        saveBackup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        editor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">replaceSelection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(app.clipboard)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 撤销操作也是一个命令。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> UndoCommand extends Command </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        app.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">undo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> false</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 全局命令历史记录就是一个堆桟。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CommandHistory </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    private field history: array of Command</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 后进……</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(c: Command) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">        //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 将命令压入历史记录数组的末尾。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ……先出</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">pop</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">():Command </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">        //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 从历史记录中取出最近的命令。</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 编辑器类包含实际的文本编辑操作。它会担任接收者的角色：最后所有命令都会</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 将执行工作委派给编辑器的方法。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Editor </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    field text: string</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">getSelection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">        //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 返回选中的文字。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">deleteSelection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">        //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 删除选中的文字。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">replaceSelection</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(text) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">        //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 在当前位置插入剪贴板中的内容。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 应用程序类会设置对象之间的关系。它会担任发送者的角色：当需要完成某些工</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 作时，它会创建并执行一个命令对象。</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> Application </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    field clipboard: string</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    field editors: array of Editors</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    field activeEditor: Editor</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    field history: CommandHistory</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 将命令分派给 </span><span style="--shiki-light:#383A42;--shiki-dark:#D19A66;">UI</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 对象的代码可能会是这样的。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">createUI</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">        //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ……</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        copy </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">executeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">CopyCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(this, activeEditor)) }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        copyButton.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">setCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(copy)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        shortcuts.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">onKeyPress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Ctrl+C&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, copy)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        cut </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">executeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">CutCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(this, activeEditor)) }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        cutButton.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">setCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(cut)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        shortcuts.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">onKeyPress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Ctrl+X&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, cut)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        paste </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">executeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">PasteCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(this, activeEditor)) }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        pasteButton.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">setCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(paste)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        shortcuts.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">onKeyPress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Ctrl+V&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, paste)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        undo </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> function</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() { </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">executeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            new </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">UndoCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(this, activeEditor)) }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        undoButton.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">setCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(undo)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        shortcuts.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">onKeyPress</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Ctrl+Z&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, undo)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 执行一个命令并检查它是否需要被添加到历史记录中。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">executeCommand</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(command) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (command.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            history.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(command)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 从历史记录中取出最近的命令并运行其 undo（撤销）方法。请注意，你并</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 不知晓该命令所属的类。但是我们不需要知晓，因为命令自己知道如何撤销</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 其动作。</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">undo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        command </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> history.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">pop</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (command </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> null)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            command.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">undo</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="命令模式优缺点" tabindex="-1"><a class="header-anchor" href="#命令模式优缺点"><span>命令模式优缺点</span></a></h2><p>√ 单一职责原则。 你可以解耦触发和执行操作的类。<br> √ 开闭原则。 你可以在不修改已有客户端代码的情况下在程序中创建新的命令。<br> √ 你可以实现撤销和恢复功能。<br> √ 你可以实现操作的延迟执行。<br> √ 你可以将一组简单命令组合成一个复杂命令。<br> × 代码可能会变得更加复杂，因为你在发送者和接收者之间增加了一个全新的层次。</p><h2 id="与其他模式的关系" tabindex="-1"><a class="header-anchor" href="#与其他模式的关系"><span>与其他模式的关系</span></a></h2><ul><li><a class="route-link" href="/blog/posts/brain-boom/design-patterns/behavioral/chain-of-responsibility.html"><strong>责任链模式</strong></a>、 <strong>命令模式</strong>、 <a class="route-link" href="/blog/posts/brain-boom/design-patterns/behavioral/mediator.html"><strong>中介者模式</strong></a>和<a class="route-link" href="/blog/posts/brain-boom/design-patterns/behavioral/observer.html"><strong>观察者模式</strong></a>用于处理请求发送者和接收者之间的不同连接方式： <ul><li><em>责任链</em> 按照顺序将请求动态传递给一系列的潜在接收者， 直至其中一名接收者对请求进行处理。</li><li><em>命令</em> 在发送者和请求者之间建立单向连接。</li><li><em>中介者</em> 清除了发送者和请求者之间的直接连接， 强制它们通过一个中介对象进行间接沟通。</li><li><em>观察者</em> 允许接收者动态地订阅或取消接收请求。</li></ul></li><li><a class="route-link" href="/blog/posts/brain-boom/design-patterns/behavioral/chain-of-responsibility.html"><strong>责任链</strong></a>的管理者可使用<strong>命令模式</strong>实现。 在这种情况下， 你可以对由请求代表的同一个上下文对象执行许多不同的操作。</li></ul><p>还有另外一种实现方式， 那就是请求自身就是一个 <em>命令</em> 对象。 在这种情况下， 你可以对由一系列不同上下文连接而成的链执行相同的操作。</p><ul><li><p>你可以同时使用<strong>命令</strong>和<a class="route-link" href="/blog/posts/brain-boom/design-patterns/behavioral/memento.html"><strong>备忘录模式</strong></a>来实现 “撤销”。 在这种情况下， 命令用于对目标对象执行各种不同的操作， 备忘录用来保存一条命令执行前该对象的状态。</p></li><li><p><strong>命令</strong>和<a class="route-link" href="/blog/posts/brain-boom/design-patterns/behavioral/strategy.html"><strong>策略模式</strong></a>看上去很像， 因为两者都能通过某些行为来参数化对象。 但是， 它们的意图有非常大的不同。</p><ul><li>你可以使用命令来将任何操作转换为对象。 操作的参数将成为对象的成员变量。 你可以通过转换来延迟操作的执行、 将操作放入队列、 保存历史命令或者向远程服务发送命令等。</li><li>另一方面， <em>策略</em> 通常可用于描述完成某件事的不同方式， 让你能够在同一个上下文类中切换算法。</li></ul></li><li><p><a class="route-link" href="/blog/posts/brain-boom/design-patterns/creational/prototype.html"><strong>原型模式</strong></a>可用于保存<strong>命令</strong>的历史记录。</p></li><li><p>你可以将<a class="route-link" href="/blog/posts/brain-boom/design-patterns/behavioral/visitor.html"><strong>访问者模式</strong></a>视为<strong>命令模式</strong>的加强版本， 其对象可对不同类的多种对象执行操作。</p></li></ul></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/4/10 08:16:01</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: jianshu.shi@eisgroup.com">Jianshu</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/blog/posts/brain-boom/design-patterns/behavioral/chain-of-responsibility.html" aria-label="责任链模式" iconsizing="both"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/chain-of-responsibility/chain-of-responsibility-mini.png" alt aria-hidden no-view height="1em" sizing="height">责任链模式</div></a><a class="route-link auto-link next" href="/blog/posts/brain-boom/design-patterns/behavioral/iterator.html" aria-label="迭代器模式" iconsizing="both"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">迭代器模式<img class="vp-icon" src="/blog/assets/images/brain-boom/design-patterns/behavioral/iterator/iterator-mini.png" alt aria-hidden no-view height="1em" sizing="height"></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">默认页脚</div><div class="vp-copyright">Copyright © 2025 Jianshu.Shi </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script src="/blog/assets/js/runtime~app.fb0bef5b.js" defer></script><script src="/blog/assets/js/1386.bd671d60.js" defer></script><script src="/blog/assets/js/app.bdb18651.js" defer></script>
  </body>
</html>
