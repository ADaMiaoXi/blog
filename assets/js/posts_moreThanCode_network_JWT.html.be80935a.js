"use strict";(self.webpackChunkmiaoxi_blog=self.webpackChunkmiaoxi_blog||[]).push([[592],{6262:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,e]of s)a[i]=e;return a}},3890:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>p,data:()=>k});var e=a(641);const n=a.p+"assets/img/image-20240223195612573.1c430091.png",l=a.p+"assets/img/image-20240223203143505.4ce540a6.png",t=a.p+"assets/img/image-20240224203633968.2b477795.png",h={},p=(0,a(6262).A)(h,[["render",function(i,s){return(0,e.uX)(),(0,e.CE)("div",null,s[0]||(s[0]=[(0,e.Fv)('<h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>回顾登陆的流程：</p><figure><img src="'+n+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>接下来的问题是：这个出入证（令牌）里面到底存啥？</p><p>一种比较简单的方法就是直接存储用户信息的 Json 串，这会造成下面的几个问题：</p><ul><li>非浏览器环境，如何在令牌中记录过期时间（直接放在出入证里面）</li><li>如何防止令牌被伪造（对令牌进行加密，秘钥在服务器端）</li></ul><p>JWT 就是为了解决这些问题出现的。</p><p>JWT 全程 <code>Json Web Token</code>，本质就是一个字符串。</p><p>它要解决的问题，就是在互联网环境中，提供<strong>统一的、安全的</strong>令牌格式。</p><p>因此，JWT 只是一个令牌格式而已，可以把它存到 cookie， 也可以存到 local storage 里面，没有任何限制。</p><p>同样的，对于传输，可以用任何传输方式来传输 JWT，一般情况下，会使用消息头来传输。</p><p>比如说，当登陆成功后，服务器可以给客户端响应一个 JWT：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">HTTP:/1.1 200 OK</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">set-cookie:token=jwt令牌</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">authorization</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">jwt令牌</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">token:jwt令牌</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，JWT 令牌可以出现在相应的任何一个地方，客户端和服务器自行约定即可。</p><blockquote><p>当然，它也可以出现在响应的多个地方，比如为了充分利用浏览器的 cookie，同时为了照顾其他设备，也可以让 JWT 出现在 set-cookie 和 authorization 或 body 中，尽管这回增加额外的传输量。</p></blockquote><p>当客户端拿到令牌后，只需要做一件事：存储</p><p>JWT 可以存储到任何位置，比如手机文件、PC文件、local storage、cookie</p><p>当后续请求发生时，只需要将它作为请求的一部分发送到服务器即可。</p><p>虽然 JWT 没有明确要求应该如何附带到请求中，但是通常会使用如下的格式：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">GET /api/resources HTTP/1.1</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">authorization</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">bearer jwt令牌</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">axios</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;xxxx&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, {</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    header</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        &quot;authorizaition&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;bearer jwt令牌&quot;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样一来，服务器就能够收到这个令牌了，通过对令牌的验证，即可知道令牌是否有效。</p><p>它们的完整交互流程就非常简单清晰了：</p><figure><img src="'+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="令牌组成" tabindex="-1"><a class="header-anchor" href="#令牌组成"><span>令牌组成</span></a></h2><p>为了保证令牌的安全性，JWT令牌由三个部分组成，分别是：</p><ol><li>header：令牌头部，记录了整个令牌的类型和签名算法。</li><li>payload：令牌负荷，记录了保存的主体信息，比如你要保存的用户信息就可以放到这里。</li><li>signature：令牌签名，按照头部固定的签名算法对整个令牌进行签名，该签名的作用是：报财政令牌不被伪造和篡改。</li></ol><p>他们组合而成的完整格式是：<code>header.payload.signature</code></p><p>比如，一个完整的 JWT 令牌如下：</p><p><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</code></p><p>它各个部分的值分别是：</p><ul><li><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</code></li><li><code>eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ</code></li><li><code>SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</code></li></ul><p>下面分别对每个部分进行说明</p><h3 id="header" tabindex="-1"><a class="header-anchor" href="#header"><span>header</span></a></h3><p>令牌头部，记录了真个令牌的类型和签名算法，是一个 <code>json</code> 对象：</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">&quot;alg&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;HS256&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">&quot;typ&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;JWT&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>该对象记录了：</p><ul><li><code>alg</code>：signature 部分使用的签名算法，通常可以取两个值 <ul><li><code>HS256</code>：对称加密算法，使用同一个秘钥对 signature 加密解密</li><li><code>RS256</code>：非对称加密算法，使用私钥签名，公钥验证</li></ul></li><li><code>typ</code>：整个令牌的类型，固定写 <code>JWT</code> 即可</li></ul><p>设置好了 <code>header</code> 之后，就可以生成 <code>header</code> 部分了</p><p>具体的生成方式极其简单，就是把 <code>header</code> 部分使用 <code>base64 url</code> 编码</p><blockquote><p><code>base64 url</code> 不是一个加密算法，而是一种编码方式，他是在 base64 算法的基础上对 +、=、/ 三个字符做出特殊处理的算法</p><p>而 <code>base64</code> 是使用64个可打印字符来表示一个二进制数据。（base64：26个字母大小写共52个，数字0-9共10个，符号 ‘+’， ‘/‘，或共64个）</p></blockquote><p>浏览器提供了 <code>btoa</code> 函数，可以完成这个操作：</p><figure><img src="data:image/png;base64,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" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;sub&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1234567890&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;name&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;John Doe&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  &quot;iat&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1516239022</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">HMACSHA256</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  base64UrlEncode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">header</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;.&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> +</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  base64UrlEncode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">payload</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">  your</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">256</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">bit</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">secret</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-payload" tabindex="-1"><a class="header-anchor" href="#_2-2-payload"><span>2.2 payload</span></a></h3><p>这部分是 JWT 的主体信息，它任然是一个 JSON 对象，它可以包含以下内容：</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;ss&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;发行者&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;iat&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;发布时间&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;exp&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;到期时间&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;sub&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;主题&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;aud&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;听众&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;nbf&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;在此之前不可用&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;jti&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;JWT ID&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上属性可以全写，也可以一个都不写，它只是一个规范，就算写了，也需要你在将来验证这个 JWT 令牌时手动处理才能发挥作用。</p><p>上述属性表达的含义分别是:</p><ul><li><p>ss：发行该 JWT 的是谁，可以写公司名字，也可以写服务名称</p></li><li><p>iat：该 JWT 的发放时间，通常写当前时间的时间戳</p></li><li><p>exp：该 JWT 的到期时间，通常写时间戳</p></li><li><p>sub：该 JWT 是用于干嘛的</p></li><li><p>aud：该 JWT 是发放给哪个终端的，可以是终端类型，也可以是用户名称，随意一点</p></li><li><p>nbf：一个时间点，在该时间点到达之前，这个令牌是不可用的</p></li><li><p>jti：JWT 的唯一编号，设置此项的目的，主要是为了防止重放攻击(重放攻击是在某些场景下，用户使用之前的令牌发送到服务器，被服务器正确的识别，从而导致不可预期的行为发生）</p></li></ul><p>可是到现在，看了半天，没有出现我想要写入的数据啊</p><p>当用户登陆成功之后，我可能需要把用户的一些信息写入到 JWT 令牌中，比如用户id、账号等等。</p><p>其实很简单，payload这一部分只是-个json对象而已，你可以向对象中加入任何想要加入的信息。比如，下面的 json 对象仍然是- -个有效的 payload。</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" data-title="json" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;foo&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;bar&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    &quot;iat&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1587548215</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>foo: bar</code> 是自定义的信息，<code>iat:1587548215</code> 是 JWT 规范中的信息。</p><p>最终，payload部分和header-样，需要通过 base64 url 编码得到:</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">window</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">btoa</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">JSON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">stringify</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;foo&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;bar&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;iat&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1587548215</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}))</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 得到字符串：&#39;eyJmb28iOiJiYXIiLCJpYXQiOjE1ODc1NDgyMTV9&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="signature" tabindex="-1"><a class="header-anchor" href="#signature"><span>signature</span></a></h3><p>这一部分是 JWT 的签名，正是它的存在，保证了整个 JWT 不被篡改这部分的生成，是对前面两个部分的编码结果，按照头部指定的方式进行加密。</p><p>比如:头部指定的加密方法是 HS256，前面两部分的编码结果是 <code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ</code> 则第三部分就是用对称加密算法 HS256 对字符串 <code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ</code>进行加密，当然你得指定一个秘钥，比如 <code>shhhhh</code></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">HS256</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyf&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;shhhhh&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>最终，将三部分组合在一起，就得到了完整的 JWT</p><p><code>SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</code></p><p>由于签名使用的秘钥保存在服务器，这样一来，客户端就无法伪造出签名，因为它拿不到秘钥。换句话说，之所以说无法伪造 JWT，就是因为第三部分的存在。而前面两部分并没有加密，只是一个编码结果而已，可以认为几乎是明文传输。</p><blockquote><p>这不会造成太大的问题，因为既然用户登陆成功了，它当然有权力查看自己的用户信息</p><p>甚至在某些网站，用户的基本信息可以被任何人查看</p><p>你要保证的，是不要把敏感的信息存放到 JWT 中，比如密码</p></blockquote><p>JWT 的 signature 可以保证令牌不被伪造，那如何保证令牌不被篡改呢?</p><p>比如，某个用户登陆成功了，获得了 JWT ，但他人为的篡改了 <code>payload</code>，比如把自己的账户余额修改为原来的两倍，然后重新编码出 <code>payload</code> 发送到服务器，服务器如何得知这些信息被篡改过了呢？</p><p>这就要说到令牌的验证了</p><h2 id="令牌的验证" tabindex="-1"><a class="header-anchor" href="#令牌的验证"><span>令牌的验证</span></a></h2><img src="'+t+'" alt="image-20240224203633968" style="zoom:80%;"><p>令牌在服务器组装完成后，会以任意的方式发送到客户端</p><p>客户端会把令牌保存起来，后续的请求会将令牌发送给服务器</p><p>而服务器需要验证令牌是否正确，如何验证呢？</p><p>首先，服务器要验证这个令牌是否被篡改过，验证方式非常简单，就是对 <code>header+payload</code> 用同样的秘钥和加密算法进行重新加密</p><p>然后把加密的结果和传入jwt的signature 进行对比，如果完全相同，则表示前面两部分没有动过，就是自己颁发的，如果不同，肯定是被篡改过了。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">传入的header</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .传入的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> payload</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .传入的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> signature</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">新的signature</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> header</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 中的加密算法</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">传入的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> heade.传入的payload,秘钥</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">验证:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 新的signature</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ==</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 传入的signature</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>最后，总结一下jwt的特点:</p><ul><li><p>jwt 本质上是一种令牌格式。它和终端设备无关，同样和服务器无关，甚至与如何传输无关,它只是规范了令牌的格式而已。</p></li><li><p>jwt 由三部分组成：header.payload.signature。主体信息在 payload</p></li><li><p>jwt 难以被篡改和伪造。这是因为有第三部分的签名存在。</p></li></ul><h2 id="问答" tabindex="-1"><a class="header-anchor" href="#问答"><span>问答</span></a></h2><p>请阐述JWT的令牌格式：</p><blockquote><p>参考答案:</p><p>token分为三段，分别是header、payload、signature。</p><p>其中，header 标识签名算法和令牌类型; payload 标识主体信息，包含令牌过期时间、发布时间、发行者、主体内容等; signature是使用特定的算法对前面两部分进行加密，得到的加密结果。</p><p>token有防篡改的特点，如果攻击者改动了前面两个部分，就会导致和第三部分对应不上，使得token 失效。而攻击者不知道加密秘钥，因此又无法修改第三部分的值。</p><p>所以，在秘钥不被泄露的前提下，一个验证通过的 token 是值得被信任的。</p></blockquote>',83)]))}]]),k=JSON.parse('{"path":"/posts/moreThanCode/network/JWT.html","title":"JWT","lang":"zh-CN","frontmatter":{"title":"JWT","icon":"material-symbols:token-outline","order":6,"category":["网络"],"description":"概述 回顾登陆的流程： 接下来的问题是：这个出入证（令牌）里面到底存啥？ 一种比较简单的方法就是直接存储用户信息的 Json 串，这会造成下面的几个问题： 非浏览器环境，如何在令牌中记录过期时间（直接放在出入证里面） 如何防止令牌被伪造（对令牌进行加密，秘钥在服务器端） JWT 就是为了解决这些问题出现的。 JWT 全程 Json Web Token，...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/blog/posts/moreThanCode/network/JWT.html"}],["meta",{"property":"og:site_name","content":"大喵喜的技术杂货铺"}],["meta",{"property":"og:title","content":"JWT"}],["meta",{"property":"og:description","content":"概述 回顾登陆的流程： 接下来的问题是：这个出入证（令牌）里面到底存啥？ 一种比较简单的方法就是直接存储用户信息的 Json 串，这会造成下面的几个问题： 非浏览器环境，如何在令牌中记录过期时间（直接放在出入证里面） 如何防止令牌被伪造（对令牌进行加密，秘钥在服务器端） JWT 就是为了解决这些问题出现的。 JWT 全程 Json Web Token，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-01T15:00:17.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-01T15:00:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"JWT\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-03-01T15:00:17.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Jianshu.Shi\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"令牌组成","slug":"令牌组成","link":"#令牌组成","children":[{"level":3,"title":"header","slug":"header","link":"#header","children":[]},{"level":3,"title":"2.2 payload","slug":"_2-2-payload","link":"#_2-2-payload","children":[]},{"level":3,"title":"signature","slug":"signature","link":"#signature","children":[]}]},{"level":2,"title":"令牌的验证","slug":"令牌的验证","link":"#令牌的验证","children":[]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]},{"level":2,"title":"问答","slug":"问答","link":"#问答","children":[]}],"git":{"createdTime":1739717238000,"updatedTime":1740841217000,"contributors":[{"name":"damiaoxi","username":"damiaoxi","email":"miaoxi1110@gmail.com","commits":4,"url":"https://github.com/damiaoxi"}]},"readingTime":{"minutes":8.18,"words":2455},"localizedDate":"2025年2月16日","excerpt":"<h2>概述</h2>\\n<p>回顾登陆的流程：</p>\\n<figure><figcaption></figcaption></figure>\\n<p>接下来的问题是：这个出入证（令牌）里面到底存啥？</p>\\n<p>一种比较简单的方法就是直接存储用户信息的 Json 串，这会造成下面的几个问题：</p>\\n<ul>\\n<li>非浏览器环境，如何在令牌中记录过期时间（直接放在出入证里面）</li>\\n<li>如何防止令牌被伪造（对令牌进行加密，秘钥在服务器端）</li>\\n</ul>\\n<p>JWT 就是为了解决这些问题出现的。</p>\\n<p>JWT 全程 <code>Json Web Token</code>，本质就是一个字符串。</p>","autoDesc":true}')}}]);