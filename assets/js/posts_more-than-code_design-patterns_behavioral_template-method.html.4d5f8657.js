"use strict";(self.webpackChunkmiaoxi_blog=self.webpackChunkmiaoxi_blog||[]).push([[4873],{66262:(s,i)=>{i.A=(s,i)=>{const a=s.__vccOpts||s;for(const[s,n]of i)a[s]=n;return a}},41955:(s,i,a)=>{a.r(i),a.d(i,{comp:()=>k,data:()=>r});var n=a(20641);const l=a.p+"assets/img/template-method.4675228c.png",e=a.p+"assets/img/problem.4dec5581.png",p=a.p+"assets/img/solution-zh.edbcb31e.png",t=a.p+"assets/img/live-example.2f8d4023.png",h={},k=(0,a(66262).A)(h,[["render",function(s,i){const a=(0,n.g2)("RouteLink");return(0,n.uX)(),(0,n.CE)("div",null,[i[8]||(i[8]=(0,n.Fv)('<h2 id="意图" tabindex="-1"><a class="header-anchor" href="#意图"><span>意图</span></a></h2><p><strong>模板方法模式</strong>是一种行为设计模式， 它在超类中定义了一个算法的框架， 允许子类在不修改结构的情况下重写算法的特定步骤。</p><figure><img src="'+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题"><span>问题</span></a></h2><p>假如你正在开发一款分析公司文档的数据挖掘程序。 用户需要向程序输入各种格式 （PDF、 DOC 或 CSV） 的文档， 程序则会试图从这些文件中抽取有意义的数据， 并以统一的格式将其返回给用户。</p><p>该程序的首个版本仅支持 DOC 文件。 在接下来的一个版本中， 程序能够支持 CSV 文件。 一个月后， 你 “教会” 了程序从 PDF 文件中抽取数据。</p><figure><img src="'+e+'" alt="数据挖掘类中包含许多重复代码。" tabindex="0" loading="lazy"><figcaption>数据挖掘类中包含许多重复代码。</figcaption></figure><p>一段时间后， 你发现这三个类中包含许多相似代码。 尽管这些类处理不同数据格式的代码完全不同， 但数据处理和分析的代码却几乎完全一样。 如果能在保持算法结构完整的情况下去除重复代码， 这难道不是一件很棒的事情吗？</p><p>还有另一个与使用这些类的客户端代码相关的问题： 客户端代码中包含许多条件语句， 以根据不同的处理对象类型选择合适的处理过程。 如果所有处理数据的类都拥有相同的接口或基类， 那么你就可以去除客户端代码中的条件语句， 转而使用多态机制来在处理对象上调用函数。</p><h2 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h2><p>模板方法模式建议将算法分解为一系列步骤， 然后将这些步骤改写为方法， 最后在 “模板方法” 中依次调用这些方法。 步骤可以是 抽象的， 也可以有一些默认的实现。 为了能够使用算法， 客户端需要自行提供子类并实现所有的抽象步骤。 如有必要还需重写一些步骤 （但这一步中不包括模板方法自身）。</p><p>让我们考虑如何在数据挖掘应用中实现上述方案。 我们可为图中的三个解析算法创建一个基类， 该类将定义调用了一系列不同文档处理步骤的模板方法。</p><figure><img src="'+p+'" alt="模板方法将算法分解为步骤， 并允许子类重写这些步骤， 而非重写实际的模板方法。" tabindex="0" loading="lazy"><figcaption>模板方法将算法分解为步骤， 并允许子类重写这些步骤， 而非重写实际的模板方法。</figcaption></figure><p>首先， 我们将所有步骤声明为<code>抽象</code>类型， 强制要求子类自行实现这些方法。 在我们的例子中， 子类中已有所有必要的实现， 因此我们只需调整这些方法的签名， 使之与超类的方法匹配即可。</p><p>现在， 让我们看看如何去除重复代码。 对于不同的数据格式， 打开和关闭文件以及抽取和解析数据的代码都不同， 因此无需修改这些方法。 但分析原始数据和生成报告等其他步骤的实现方式非常相似， 因此可将其提取到基类中， 以让子类共享这些代码。</p><p>正如你所看到的那样， 我们有两种类型的步骤：</p><ul><li>抽象步骤必须由各个子类来实现</li><li>可选步骤已有一些默认实现， 但仍可在需要时进行重写</li></ul><p>还有另一种名为钩子的步骤。 钩子是内容为空的可选步骤。 即使不重写钩子， 模板方法也能工作。 钩子通常放置在算法重要步骤的前后， 为子类提供额外的算法扩展点。</p><h2 id="真实世界类比" tabindex="-1"><a class="header-anchor" href="#真实世界类比"><span>真实世界类比</span></a></h2><figure><img src="'+t+'" alt="可对典型的建筑方案进行微调以更好地满足客户需求。" tabindex="0" loading="lazy"><figcaption>可对典型的建筑方案进行微调以更好地满足客户需求。</figcaption></figure><p>模板方法可用于建造大量房屋。 标准房屋建造方案中可提供几个扩展点， 允许潜在房屋业主调整成品房屋的部分细节。</p><p>每个建造步骤 （例如打地基、 建造框架、 建造墙壁和安装水电管线等） 都能进行微调， 这使得成品房屋会略有不同。</p><h2 id="模板方法模式结构" tabindex="-1"><a class="header-anchor" href="#模板方法模式结构"><span>模板方法模式结构</span></a></h2><figure><img src="data:image/png;base64,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" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ol><li><p><strong>抽象类</strong> （Abstract­Class） 会声明作为算法步骤的方法， 以及依次调用它们的实际模板方法。 算法步骤可以被声明为 抽象类型， 也可以提供一些默认实现。</p></li><li><p><strong>具体类</strong> （Concrete­Class） 可以重写所有步骤， 但不能重写模板方法自身。</p></li></ol><h2 id="伪代码" tabindex="-1"><a class="header-anchor" href="#伪代码"><span>伪代码</span></a></h2><p>本例中的<strong>模板方法</strong>模式为一款简单策略游戏中人工智能的不同分支提供 “框架”。</p><figure><img src="data:image/png;base64,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" alt="一款简单游戏的 AI 类。" tabindex="0" loading="lazy"><figcaption>一款简单游戏的 AI 类。</figcaption></figure><p>游戏中所有的种族都有几乎同类的单位和建筑。 因此你可以在不同的种族上复用相同的 AI 结构， 同时还需要具备重写一些细节的能力。 通过这种方式， 你可以重写半兽人的 AI 使其更富攻击性， 也可以让人类侧重防守， 还可以禁止怪物建造建筑。 在游戏中新增种族需要创建新的 AI 子类， 还需要重写 AI 基类中所声明的默认方法。</p><div class="language-py line-numbers-mode" data-highlighter="shiki" data-ext="py" data-title="py" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 抽象类定义了一个模板方法，其中通常会包含某个由抽象原语操作调用组成的算</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 法框架。具体子类会实现这些操作，但是不会对模板方法做出修改。</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> GameAI </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 模板方法定义了某个算法的框架。</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">turn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">        collectResources</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">        buildStructures</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">        buildUnits</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">        attack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 某些步骤可在基类中直接实现。</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">collectResources</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">        foreach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (s </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> this.builtStructures) do</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            s.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">collect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 某些可定义为抽象类型。</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    abstract method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">buildStructures</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    abstract method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">buildUnits</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 一个类可包含多个模板方法。</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">attack</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        enemy </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> closestEnemy</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (enemy </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> null)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">            sendScouts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.center)</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        else</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">            sendWarriors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(enemy.position)</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    abstract method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">sendScouts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(position)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    abstract method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">sendWarriors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(position)</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 具体类必须实现基类中的所有抽象操作，但是它们不能重写模板方法自身。</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> OrcsAI extends GameAI </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">buildStructures</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (there are some resources) then</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">            //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 建造农场，接着是谷仓，然后是要塞。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">buildUnits</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (there are plenty of resources) then</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (there are no scouts)</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">                //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 建造苦工，将其加入侦查编组。</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            else</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">                //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 建造兽族步兵，将其加入战士编组。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ……</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">sendScouts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(position) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (scouts.length </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) then</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">            //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 将侦查编组送到指定位置。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">sendWarriors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(position) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (warriors.length </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) then</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">            //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 将战斗编组送到指定位置。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">//</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 子类可以重写部分默认的操作。</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> MonstersAI extends GameAI </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">collectResources</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">        //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 怪物不会采集资源。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">buildStructures</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">        //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 怪物不会建造建筑。</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    method </span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">buildUnits</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">is</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">        //</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 怪物不会建造单位。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="模板方法模式优缺点" tabindex="-1"><a class="header-anchor" href="#模板方法模式优缺点"><span>模板方法模式优缺点</span></a></h2><p>√ 你可仅允许客户端重写一个大型算法中的特定部分， 使得算法其他部分修改对其所造成的影响减小。<br> √ 你可将重复代码提取到一个超类中。<br> × 部分客户端可能会受到算法框架的限制。<br> × 通过子类抑制默认步骤实现可能会导致违反里氏替换原则。<br> × 模板方法中的步骤越多， 其维护工作就可能会越困难。</p><h2 id="与其他模式的关系" tabindex="-1"><a class="header-anchor" href="#与其他模式的关系"><span>与其他模式的关系</span></a></h2>',33)),(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[(0,n.Lk)("p",null,[(0,n.bF)(a,{to:"/posts/more-than-code/design-patterns/creational/factory.html"},{default:(0,n.k6)((()=>i[0]||(i[0]=[(0,n.Lk)("strong",null,"工厂方法模式",-1)]))),_:1}),i[1]||(i[1]=(0,n.eW)("是")),i[2]||(i[2]=(0,n.Lk)("strong",null,"模板方法模式",-1)),i[3]||(i[3]=(0,n.eW)("的一种特殊形式。 同时， 工厂方法可以作为一个大型模板方法中的一个步骤。"))])]),(0,n.Lk)("li",null,[(0,n.Lk)("p",null,[i[5]||(i[5]=(0,n.Lk)("strong",null,"模板方法",-1)),i[6]||(i[6]=(0,n.eW)("基于继承机制： 它允许你通过扩展子类中的部分内容来改变部分算法。 ")),(0,n.bF)(a,{to:"/posts/more-than-code/design-patterns/behavioral/strategy.html"},{default:(0,n.k6)((()=>i[4]||(i[4]=[(0,n.Lk)("strong",null,"策略模式",-1)]))),_:1}),i[7]||(i[7]=(0,n.eW)("基于组合机制： 你可以通过对相应行为提供不同的策略来改变对象的部分行为。 模板方法在类层次上运作， 因此它是静态的。 策略在对象层次上运作， 因此允许在运行时切换行为。"))])])])])}]]),r=JSON.parse('{"path":"/posts/more-than-code/design-patterns/behavioral/template-method.html","title":"模板方法模式","lang":"zh-CN","frontmatter":{"title":"模板方法模式","icon":"/assets/images/more-than-code/design-patterns/behavioral/template-method/template-method-mini.png","order":9,"category":["设计模式"],"description":"意图 模板方法模式是一种行为设计模式， 它在超类中定义了一个算法的框架， 允许子类在不修改结构的情况下重写算法的特定步骤。 问题 假如你正在开发一款分析公司文档的数据挖掘程序。 用户需要向程序输入各种格式 （PDF、 DOC 或 CSV） 的文档， 程序则会试图从这些文件中抽取有意义的数据， 并以统一的格式将其返回给用户。 该程序的首个版本仅支持 DO...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/blog/posts/more-than-code/design-patterns/behavioral/template-method.html"}],["meta",{"property":"og:site_name","content":"大喵喜的杂货铺"}],["meta",{"property":"og:title","content":"模板方法模式"}],["meta",{"property":"og:description","content":"意图 模板方法模式是一种行为设计模式， 它在超类中定义了一个算法的框架， 允许子类在不修改结构的情况下重写算法的特定步骤。 问题 假如你正在开发一款分析公司文档的数据挖掘程序。 用户需要向程序输入各种格式 （PDF、 DOC 或 CSV） 的文档， 程序则会试图从这些文件中抽取有意义的数据， 并以统一的格式将其返回给用户。 该程序的首个版本仅支持 DO..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-07T09:02:49.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-07T09:02:49.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"模板方法模式\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-05-07T09:02:49.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Jianshu.Shi\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"意图","slug":"意图","link":"#意图","children":[]},{"level":2,"title":"问题","slug":"问题","link":"#问题","children":[]},{"level":2,"title":"解决方案","slug":"解决方案","link":"#解决方案","children":[]},{"level":2,"title":"真实世界类比","slug":"真实世界类比","link":"#真实世界类比","children":[]},{"level":2,"title":"模板方法模式结构","slug":"模板方法模式结构","link":"#模板方法模式结构","children":[]},{"level":2,"title":"伪代码","slug":"伪代码","link":"#伪代码","children":[]},{"level":2,"title":"模板方法模式优缺点","slug":"模板方法模式优缺点","link":"#模板方法模式优缺点","children":[]},{"level":2,"title":"与其他模式的关系","slug":"与其他模式的关系","link":"#与其他模式的关系","children":[]}],"git":{"createdTime":1741180358000,"updatedTime":1746608569000,"contributors":[{"name":"damiaoxi","username":"damiaoxi","email":"miaoxi1110@gmail.com","commits":2,"url":"https://github.com/damiaoxi"},{"name":"Jianshu","username":"Jianshu","email":"jianshu.shi@eisgroup.com","commits":3,"url":"https://github.com/Jianshu"}]},"readingTime":{"minutes":6.81,"words":2044},"localizedDate":"2025年3月5日","excerpt":"<h2>意图</h2>\\n<p><strong>模板方法模式</strong>是一种行为设计模式， 它在超类中定义了一个算法的框架， 允许子类在不修改结构的情况下重写算法的特定步骤。</p>\\n<figure><figcaption></figcaption></figure>\\n<h2>问题</h2>\\n<p>假如你正在开发一款分析公司文档的数据挖掘程序。 用户需要向程序输入各种格式 （PDF、 DOC 或 CSV） 的文档， 程序则会试图从这些文件中抽取有意义的数据， 并以统一的格式将其返回给用户。</p>\\n<p>该程序的首个版本仅支持 DOC 文件。 在接下来的一个版本中， 程序能够支持 CSV 文件。 一个月后， 你 “教会” 了程序从 PDF 文件中抽取数据。</p>","autoDesc":true}')}}]);